{"ast":null,"code":"import{useEffect,useState}from'react';import{TodoInput}from'./TodoInput';import{TodoTitle}from'./TodoTitle';import{TodoCheckbox}from'./TodoCheckbox';import{Button}from'../common/Button';/**\r\n * Renders a Todo component.\r\n *\r\n * @param {Object} props - The component props.\r\n * @param {string} props.id - The ID of the todo.\r\n * @returns {JSX.Element} The rendered Todo component.\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Todo(_ref){let{id,fetchData}=_ref;const[todo,setTodo]=useState(null);const[isEdit,setIsEdit]=useState(false);const[tempTitle,setTempTitle]=useState((todo===null||todo===void 0?void 0:todo.title)||'');// intial fetch\nuseEffect(()=>{const fetchData=async()=>{try{const response=await fetch(\"http://localhost:3000/\".concat(id));const jsonResponse=await response.json();setTodo(jsonResponse);setTempTitle(jsonResponse.title);}catch(error){console.log(error);}};fetchData();},[id]);/**\r\n   * Handles the change event of the input element.\r\n   * @param {Object} e - The event object.\r\n   */const handleInputChange=e=>{setTempTitle(e.target.value);};/**\r\n   * Handles the edit functionality.\r\n   */async function handleEditClick(){if(isEdit){await handleUpdate({title:tempTitle});}setIsEdit(isEdit=>!isEdit);}/**\r\n   * Handles the delete action for a todo item.\r\n   */async function handleDelete(){try{await fetch(\"http://localhost:3000/\".concat(id),{method:\"DELETE\"});await fetchData();// refetch data as the todo item is deleted\n}catch(error){console.log(error);}}/**\r\n   * Updates the todo item with the provided data.\r\n   * @param {object} updatedTodo - The updated todo object.\r\n   * @returns {Promise<void>} - A promise that resolves when the update is complete.\r\n   */async function handleUpdate(updatedTodo){try{await fetch(\"http://localhost:3000/\".concat(id),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(updatedTodo)});setTodo({...todo,...updatedTodo});}catch(error){console.log(error);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"todo\",children:[\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"todo__items\",children:[\" \",/*#__PURE__*/_jsx(TodoCheckbox,{isCompleted:todo===null||todo===void 0?void 0:todo.isCompleted,handleUpdate:handleUpdate}),isEdit?/*#__PURE__*/_jsx(TodoInput,{title:tempTitle,handleInputChange:handleInputChange}):/*#__PURE__*/_jsx(TodoTitle,{title:todo===null||todo===void 0?void 0:todo.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"todo__buttons\",children:[\" \",/*#__PURE__*/_jsx(Button,{className:isEdit?'btn-success':'btn-info',onClick:handleEditClick,children:isEdit?'Submit':'Edit'}),/*#__PURE__*/_jsx(Button,{className:\"btn-danger\",onClick:handleDelete,disabled:isEdit,children:\"Delete\"})]})]});}","map":{"version":3,"names":["useEffect","useState","TodoInput","TodoTitle","TodoCheckbox","Button","jsx","_jsx","jsxs","_jsxs","Todo","_ref","id","fetchData","todo","setTodo","isEdit","setIsEdit","tempTitle","setTempTitle","title","response","fetch","concat","jsonResponse","json","error","console","log","handleInputChange","e","target","value","handleEditClick","handleUpdate","handleDelete","method","updatedTodo","headers","body","JSON","stringify","className","children","isCompleted","onClick","disabled"],"sources":["C:/Users/FAISA/OneDrive/Desktop/CS336/lab9-FaisalAziz1241/frontend/src/components/Todo/Todo.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\n\r\nimport { TodoInput } from './TodoInput'\r\nimport { TodoTitle } from './TodoTitle'\r\nimport { TodoCheckbox } from './TodoCheckbox'\r\nimport { Button } from '../common/Button'\r\n\r\n/**\r\n * Renders a Todo component.\r\n *\r\n * @param {Object} props - The component props.\r\n * @param {string} props.id - The ID of the todo.\r\n * @returns {JSX.Element} The rendered Todo component.\r\n */\r\nexport function Todo({ id, fetchData }) {\r\n  const [ todo, setTodo ] = useState(null)\r\n  const [ isEdit, setIsEdit ] = useState(false)\r\n  const [ tempTitle, setTempTitle ] = useState(todo?.title || '')\r\n\r\n  // intial fetch\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:3000/${id}`)\r\n        const jsonResponse = await response.json()\r\n        setTodo(jsonResponse)\r\n        setTempTitle(jsonResponse.title)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    }\r\n    fetchData()\r\n  },[id])\r\n\r\n  /**\r\n   * Handles the change event of the input element.\r\n   * @param {Object} e - The event object.\r\n   */\r\n  const handleInputChange = (e) => {\r\n    setTempTitle(e.target.value)\r\n  }\r\n\r\n  /**\r\n   * Handles the edit functionality.\r\n   */\r\n  async function handleEditClick() {\r\n    if(isEdit) {\r\n      await handleUpdate({ title: tempTitle })\r\n    }\r\n    setIsEdit(isEdit => !isEdit)\r\n  }\r\n\r\n  /**\r\n   * Handles the delete action for a todo item.\r\n   */\r\n  async function handleDelete() {\r\n    try {\r\n      await fetch(`http://localhost:3000/${id}`, {\r\n      method: \"DELETE\",\r\n    })\r\n    await fetchData() // refetch data as the todo item is deleted\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates the todo item with the provided data.\r\n   * @param {object} updatedTodo - The updated todo object.\r\n   * @returns {Promise<void>} - A promise that resolves when the update is complete.\r\n   */\r\n  async function handleUpdate(updatedTodo) {\r\n    try {\r\n      await fetch(`http://localhost:3000/${id}`, {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(updatedTodo),\r\n      });\r\n      setTodo({ ...todo, ...updatedTodo });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='todo'> {/* className important */}\r\n      <div className='todo__items'> {/* className important */}\r\n        <TodoCheckbox isCompleted={todo?.isCompleted} handleUpdate={handleUpdate} />\r\n        {isEdit\r\n          ? <TodoInput title={tempTitle} handleInputChange={handleInputChange} />\r\n          : <TodoTitle title={todo?.title} />\r\n        }\r\n      </div>\r\n      <div className='todo__buttons'> {/* className important */}\r\n        <Button \r\n          className={isEdit ? 'btn-success' : 'btn-info'}\r\n          onClick={handleEditClick}\r\n        >\r\n          {isEdit ? 'Submit' : 'Edit'}\r\n        </Button>\r\n        <Button \r\n          className='btn-danger'\r\n          onClick={handleDelete} \r\n          disabled={isEdit}\r\n        >\r\n          Delete\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}